(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{380:function(t,e,n){var r=n(182).f,a=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in a||n(60)&&r(a,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},427:function(t,e,n){"use strict";n.r(e);n(380),n(184);var r=n(46),a=n(381),s=n(392),i={name:"Dashboard",mixins:[a.a,s.a],data:function(){return{loading:!0,loadingData:!1,makingTransaction:!1,trx:{hash:"",link:""},token:{name:"",symbol:"",decimals:18,link:"",logo:""},account:{isMember:!1,address:"",memberId:0,member:null}}},computed:{network:{get:function(){return this.$store.getters.network}},metamask:{get:function(){return this.$store.getters.metamask}},web3:{get:function(){return this.$store.getters.web3}}},mounted:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initDapp();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{initDapp:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{this.initToken(),this.initDao(),this.ready()}catch(t){alert(t),document.location.href=this.$withBase("/")}case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),ready:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTokenData();case 2:return t.next=4,this.getAccountData();case 4:this.loading=!1;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),enable:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("connect");case 2:return t.next=4,this.getAccountData();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getTokenData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.promisify(this.instances.token.name);case 3:return this.token.name=t.sent,t.next=6,this.promisify(this.instances.token.symbol);case 6:this.token.symbol=t.sent,this.token.link=this.network.current.etherscanLink+"/token/"+this.instances.token.address,this.token.logo=this.$withBase("/assets/images/logo/shaka_logo_white.png"),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),this.loading=!1,alert("Some error occurred.");case 16:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}(),getAccountData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingData=!0,t.prev=1,this.metamask.address&&(this.account.address=this.web3.eth.accounts[0]),t.next=5,this.promisify(this.instances.dao.isMember,this.account.address);case 5:if(this.account.isMember=t.sent,!this.account.isMember){t.next=11;break}return t.next=9,this.promisify(this.instances.dao.getMemberByAddress,this.account.address);case 9:e=t.sent,this.account.member=this.formatStructure(e);case 11:this.loadingData=!1,t.next=19;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0),this.loadingData=!1,alert("Some error occurred.");case 19:case"end":return t.stop()}},t,this,[[1,14]])}));return function(){return t.apply(this,arguments)}}(),join:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{this.makingTransaction=!0,this.web3.eth.sendTransaction({value:0,from:this.account.address,to:this.instances.dao.address},function(t,n){t?alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!"):(e.trx.hash=n,e.trx.link=e.network.current.etherscanLink+"/tx/"+e.trx.hash)})}catch(t){console.log(t),alert("Cannot connect. Please verify that you have MetaMask installed and unlocked.")}case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},o=n(21),c=Object(o.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{lg:"10","offset-lg":"1"}},[t.loading?[n("b-card",{staticClass:"mb-3"},[n("ui--loader",{attrs:{loading:!0}})],1)]:[t.metamask.address?[t.loadingData?[n("ui--loader",{attrs:{loading:!0}})]:[t.account.member?[n("ui--member-details",{attrs:{member:t.account.member,token:t.token,network:t.network}})]:[n("b-card",{staticClass:"mb-3",attrs:{header:"Your account"}},[n("b",[t._v("Account:")]),t._v(" "),n("b-link",{attrs:{href:t.network.current.etherscanLink+"/address/"+t.account.address,target:"_blank"}},[t._v(t._s(t.account.address)+"\n                                ")])],1),t._v(" "),n("b-card",{staticClass:"mb-3",attrs:{header:"FriendsFingers DAO"}},[n("b-btn",{attrs:{variant:"primary",size:"lg",disabled:t.makingTransaction},on:{click:t.join}},[t._v("\n                                    Join DAO\n                                ")]),t._v(" "),n("br"),t._v(" "),t.trx.hash?n("b-alert",{staticClass:"mt-3",attrs:{show:"",variant:"success"}},[t._v("\n                                    Last transaction:\n                                    "),n("b-link",{attrs:{href:t.trx.link,target:"_blank"}},[t._v(t._s(t.trx.hash))])],1):t._e()],1)]]]:[n("b-card",{staticClass:"mb-3",attrs:{header:"Your account"}},[t.metamask.installed&&t.metamask.netId===t.network.current.id?n("p",{staticClass:"card-text"},[n("b-btn",{attrs:{variant:"primary",size:"lg",disabled:!t.metamask.installed||t.metamask.netId!==t.network.current.id},on:{click:t.enable}},[t._v("\n                                Connect\n                            ")])],1):n("b-alert",{attrs:{show:"",variant:"warning"}},[t.metamask.installed?t.metamask.netId!==t.network.current.id?[t._v("\n                                You are on the wrong Network."),n("br"),t._v("\n                                Please switch your Ethereum Provider on "),n("b",[t._v(t._s(t.network.current.name))]),t._v(".\n                            ")]:t._e():[t._v("\n                                Install\n                                "),n("b-link",{attrs:{href:"https://metamask.io/",target:"_blank"}},[t._v("MetaMask")]),t._v("\n                                or a mobile browser like\n                                "),n("b-link",{attrs:{href:"https://trustwallet.com/",target:"_blank"}},[t._v("Trust Wallet")]),t._v("\n                                or\n                                "),n("b-link",{attrs:{href:"https://wallet.coinbase.com/",target:"_blank"}},[t._v("Coinbase Wallet")]),t._v("\n                                to get your Tokens.\n                            ")]],2)],1)]]],2)],1)],1)},[],!1,null,null,null);e.default=c.exports}}]);