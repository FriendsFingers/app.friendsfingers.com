(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{151:function(e,t,r){"use strict";r(156),r(11),r(152),r(157),r(158),r(39),r(159),r(160),r(62);var a=r(161),n=r.n(a);t.a={data:function(){return{zeroAddress:"0x0000000000000000000000000000000000000000"}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},methods:{getParam:function(e){var t={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,(function(e,r,a){t[r]=void 0!==a?a:""})),e?t[e]?t[e]:null:t},ethGetCall:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.push({from:this.dapp.fallbackAddress}),this.promisify.apply(this,[e].concat(r))},promisify:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return new Promise((function(t,a){e.apply(void 0,r.concat([function(e,r){e?a(e):t(r)}]))}))},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}},generateQRCode:function(e){return n.a.toDataURL(e,{color:{dark:"#b733a7",light:"#0000"}})},makeToast:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(t,{title:e,variant:r,solid:!0})},formatStructure:function(e){return 0===parseInt(e[0].valueOf())?null:{id:parseInt(e[0].valueOf()),address:e[1],fingerprint:this.formatFingerprint(e[2]),creationDate:1e3*e[3].valueOf(),stakedTokens:parseFloat(this.dapp.web3.fromWei(e[4])),usedTokens:parseFloat(this.dapp.web3.fromWei(e[5])),data:e[6],approved:e[7]}},formatFingerprint:function(e){var t=e.replace("0x","").match(new RegExp(".{1,6}","g"));return{borderColor:"#".concat(t[0]),backgroundColor:"#".concat(t[1]),mainColor:"#".concat(t[2])}}}}},153:function(e,t,r){"use strict";var a=r(1),n=r(154);a({target:"String",proto:!0,forced:r(155)("link")},{link:function(e){return n(this,"a","href",e)}})},154:function(e,t,r){var a=r(18),n=/"/g;e.exports=function(e,t,r,o){var s=String(a(e)),i="<"+t;return""!==r&&(i+=" "+r+'="'+String(o).replace(n,"&quot;")+'"'),i+">"+s+"</"+t+">"}},155:function(e,t,r){var a=r(3);e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},216:function(e,t,r){"use strict";r.r(t);r(61),r(152),r(157),r(153),r(40);var a=r(16),n={name:"Dao",mixins:[r(151).a],data:function(){return{loading:!0,pagination:{page:1,limit:12},memberList:[],token:{name:"",symbol:"",decimals:18,link:"",logo:""},dao:{membersNumber:0,totalStakedTokens:0,totalUsedTokens:0},account:{isMember:!1}}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},mounted:function(){this.memberId=this.getParam("id"),this.initDapp()},methods:{initDapp:function(){try{this.$store.dispatch("initShakaToken"),this.$store.dispatch("initDao"),this.ready()}catch(e){alert(e),this.$router.push({path:"/"})}},ready:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDaoData();case 2:return t.next=4,e.getTokenData();case 4:return e.loading=!1,t.next=7,e.getMember(e.dao.membersNumber);case 7:case"end":return t.stop()}}),t)})))()},loadMore:function(){this.pagination.page++,this.getMember(this.dao.membersNumber-this.memberList.length)},getDaoData:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=parseInt,t.next=4,e.ethGetCall(e.dapp.instances.dao.membersNumber);case 4:return t.t1=t.sent.valueOf(),e.dao.membersNumber=(0,t.t0)(t.t1),t.t2=parseFloat,t.t3=e.dapp.web3,t.next=10,e.ethGetCall(e.dapp.instances.dao.totalStakedTokens);case 10:return t.t4=t.sent,t.t5=t.t3.fromWei.call(t.t3,t.t4),e.dao.totalStakedTokens=(0,t.t2)(t.t5),t.t6=parseFloat,t.t7=e.dapp.web3,t.next=17,e.ethGetCall(e.dapp.instances.dao.totalUsedTokens);case 17:if(t.t8=t.sent,t.t9=t.t7.fromWei.call(t.t7,t.t8),e.dao.totalUsedTokens=(0,t.t6)(t.t9),!e.dapp.metamask.address){t.next=24;break}return t.next=23,e.ethGetCall(e.dapp.instances.dao.isMember,e.dapp.metamask.address);case 23:e.account.isMember=t.sent;case 24:t.next=31;break;case 26:t.prev=26,t.t10=t.catch(0),e.loading=!1,console.log(t.t10),alert("Some error occurred.");case 31:case"end":return t.stop()}}),t,null,[[0,26]])})))()},getTokenData:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ethGetCall(e.dapp.instances.token.name);case 3:return e.token.name=t.sent,t.next=6,e.ethGetCall(e.dapp.instances.token.symbol);case 6:e.token.symbol=t.sent,e.token.link=e.dapp.network.current.etherscanLink+"/token/"+e.dapp.instances.token.address,e.token.logo=e.$withBase("/assets/images/logo/shaka_logo_white.png"),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),e.loading=!1,console.log(t.t0),alert("Some error occurred.");case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getMember:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.ethGetCall(t.dapp.instances.dao.getMemberById,e);case 2:a=r.sent,n=t.formatStructure(a),t.memberList.push(n),t.memberList.length%(t.pagination.limit*t.pagination.page)!=0&&t.memberList.length<t.dao.membersNumber&&t.getMember(t.dao.membersNumber-t.memberList.length);case 6:case"end":return r.stop()}}),r)})))()}}},o=r(30),s=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-row",{staticClass:"masthead m-4"},[r("b-col",{attrs:{lg:"8","offset-lg":"2"}},[r("h1",{staticClass:"display-5"},[r("b-img",{attrs:{src:e.$withBase("/assets/images/logo/friendsfingers.svg"),rounded:"circle",height:"64",alt:e.$site.title}}),e._v(" "),r("br"),e._v("\n                FriendsFingers DAO\n            ")],1),e._v(" "),e.loading?e._e():[e.account.isMember?e._e():r("b-btn",{staticClass:"my-2",attrs:{to:e.$withBase("/dashboard"),variant:"primary",size:"lg"}},[e._v("\n                    Join DAO\n                ")]),e._v(" "),r("h4",{staticClass:"text-muted"},[r("b",[e._v(e._s(e.dao.membersNumber))]),e._v(" DAO Members"),r("br"),e._v(" "),r("b",[e._v(e._s(e.dao.totalStakedTokens)+" "+e._s(e.token.symbol))]),e._v(" Staked"),r("br"),e._v(" "),e.dao.totalUsedTokens>0?[r("b",[e._v(e._s(e.dao.totalUsedTokens)+" "+e._s(e.token.symbol))]),e._v(" Used\n                    ")]:e._e()],2)]],2)],1),e._v(" "),e.loading?[r("ui--loader",{attrs:{loading:!0}})]:r("b-row",[r("b-col",{attrs:{lg:"10","offset-lg":"1"}},[r("b-row",{staticClass:"mt-2"},e._l(e.memberList,(function(t){return r("b-col",{key:t.id,staticClass:"p-2",attrs:{md:"2",sm:"4",cols:"6"}},[r("b-card",{attrs:{"no-body":""}},[r("b-card-body",[r("b-link",{attrs:{to:{path:"/member/",query:{ref:t.id}}}},[r("ui--member-image",{attrs:{member:t}})],1)],1),e._v(" "),r("b-card-footer",[e._v("\n                            #"+e._s(t.id)+"\n\n                            "),r("div",{staticClass:"float-right"},[t.approved?r("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"p-1",attrs:{title:"Verified",variant:"success",pill:""}},[r("font-awesome-icon",{attrs:{icon:"check-circle"}})],1):e._e()],1)])],1)],1)})),1),e._v(" "),e.memberList.length<e.dao.membersNumber?r("b-row",{staticClass:"my-5"},[r("b-col",{staticClass:"text-center",attrs:{md:"12"}},[r("b-btn",{attrs:{variant:"outline-primary",size:"lg"},on:{click:e.loadMore}},[e._v("\n                        Load more\n                    ")])],1)],1):e._e()],1)],1)],2)}),[],!1,null,null,null);t.default=s.exports}}]);