(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{128:function(t,e,a){"use strict";a(130),a(131),a(132);var r=a(133),s=a.n(r);e.a={data:function(){return{zeroAddress:"0x0000000000000000000000000000000000000000"}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},methods:{getParam:function(t){var e={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,(function(t,a,r){e[a]=void 0!==r?r:""})),t?e[t]?e[t]:null:e},ethGetCall:function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),r=1;r<e;r++)a[r-1]=arguments[r];return a.push({from:this.dapp.fallbackAddress}),this.promisify.apply(this,[t].concat(a))},promisify:function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),r=1;r<e;r++)a[r-1]=arguments[r];return new Promise((function(e,r){t.apply(void 0,a.concat([function(t,a){t?r(t):e(a)}]))}))},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}},generateQRCode:function(t){return s.a.toDataURL(t,{color:{dark:"#b733a7",light:"#0000"}})},makeToast:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvToast.toast(e,{title:t,variant:a,solid:!0})},formatStructure:function(t){return 0===parseInt(t[0].valueOf())?null:{id:parseInt(t[0].valueOf()),address:t[1],fingerprint:this.formatFingerprint(t[2]),creationDate:1e3*t[3].valueOf(),stakedTokens:parseFloat(this.dapp.web3.fromWei(t[4])),usedTokens:parseFloat(this.dapp.web3.fromWei(t[5])),data:t[6],approved:t[7]}},formatFingerprint:function(t){var e=t.replace("0x","").match(new RegExp(".{1,6}","g"));return{borderColor:"#".concat(e[0]),backgroundColor:"#".concat(e[1]),mainColor:"#".concat(e[2])}}}}},193:function(t,e,a){"use strict";a.r(e);a(129),a(63);var r,s,n,i,o=a(22),c={name:"Dao",mixins:[a(128).a],data:function(){return{loading:!0,pagination:{page:1,limit:12},memberList:[],token:{name:"",symbol:"",decimals:18,link:"",logo:""},dao:{membersNumber:0,totalStakedTokens:0,totalUsedTokens:0},account:{isMember:!1}}},computed:{dapp:{get:function(){return this.$store.getters.dapp}}},mounted:function(){this.memberId=this.getParam("id"),this.initDapp()},methods:{initDapp:function(){try{this.$store.dispatch("initShakaToken"),this.$store.dispatch("initDao"),this.ready()}catch(t){alert(t),this.$router.push({path:"/"})}},ready:(i=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDaoData();case 2:return t.next=4,this.getTokenData();case 4:return this.loading=!1,t.next=7,this.getMember(this.dao.membersNumber);case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),loadMore:function(){this.pagination.page++,this.getMember(this.dao.membersNumber-this.memberList.length)},getDaoData:(n=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=parseInt,t.next=4,this.ethGetCall(this.dapp.instances.dao.membersNumber);case 4:return t.t1=t.sent.valueOf(),this.dao.membersNumber=(0,t.t0)(t.t1),t.t2=parseFloat,t.t3=this.dapp.web3,t.next=10,this.ethGetCall(this.dapp.instances.dao.totalStakedTokens);case 10:return t.t4=t.sent,t.t5=t.t3.fromWei.call(t.t3,t.t4),this.dao.totalStakedTokens=(0,t.t2)(t.t5),t.t6=parseFloat,t.t7=this.dapp.web3,t.next=17,this.ethGetCall(this.dapp.instances.dao.totalUsedTokens);case 17:if(t.t8=t.sent,t.t9=t.t7.fromWei.call(t.t7,t.t8),this.dao.totalUsedTokens=(0,t.t6)(t.t9),!this.dapp.metamask.address){t.next=24;break}return t.next=23,this.ethGetCall(this.dapp.instances.dao.isMember,this.dapp.metamask.address);case 23:this.account.isMember=t.sent;case 24:t.next=31;break;case 26:t.prev=26,t.t10=t.catch(0),this.loading=!1,console.log(t.t10),alert("Some error occurred.");case 31:case"end":return t.stop()}}),t,this,[[0,26]])}))),function(){return n.apply(this,arguments)}),getTokenData:(s=Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.ethGetCall(this.dapp.instances.token.name);case 3:return this.token.name=t.sent,t.next=6,this.ethGetCall(this.dapp.instances.token.symbol);case 6:this.token.symbol=t.sent,this.token.link=this.dapp.network.current.etherscanLink+"/token/"+this.dapp.instances.token.address,this.token.logo=this.$withBase("/assets/images/logo/shaka_logo_white.png"),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),this.loading=!1,console.log(t.t0),alert("Some error occurred.");case 16:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return s.apply(this,arguments)}),getMember:(r=Object(o.a)(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ethGetCall(this.dapp.instances.dao.getMemberById,e);case 2:a=t.sent,r=this.formatStructure(a),this.memberList.push(r),this.memberList.length%(this.pagination.limit*this.pagination.page)!=0&&this.memberList.length<this.dao.membersNumber&&this.getMember(this.dao.membersNumber-this.memberList.length);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}},l=a(11),d=Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"masthead m-4"},[a("b-col",{attrs:{lg:"8","offset-lg":"2"}},[a("h1",{staticClass:"display-5"},[a("b-img",{attrs:{src:t.$withBase("/assets/images/logo/friendsfingers.svg"),rounded:"circle",height:"64",alt:t.$site.title}}),t._v(" "),a("br"),t._v("\n                FriendsFingers DAO\n            ")],1),t._v(" "),t.loading?t._e():[t.account.isMember?t._e():a("b-btn",{staticClass:"my-2",attrs:{to:t.$withBase("/dashboard"),variant:"primary",size:"lg"}},[t._v("\n                    Join DAO\n                ")]),t._v(" "),a("h4",{staticClass:"text-muted"},[a("b",[t._v(t._s(t.dao.membersNumber))]),t._v(" DAO Members"),a("br"),t._v(" "),a("b",[t._v(t._s(t.dao.totalStakedTokens)+" "+t._s(t.token.symbol))]),t._v(" Staked"),a("br"),t._v(" "),t.dao.totalUsedTokens>0?[a("b",[t._v(t._s(t.dao.totalUsedTokens)+" "+t._s(t.token.symbol))]),t._v(" Used\n                    ")]:t._e()],2)]],2)],1),t._v(" "),t.loading?[a("ui--loader",{attrs:{loading:!0}})]:a("b-row",[a("b-col",{attrs:{lg:"10","offset-lg":"1"}},[a("b-row",{staticClass:"mt-2"},t._l(t.memberList,(function(e){return a("b-col",{key:e.id,staticClass:"p-2",attrs:{md:"2",sm:"4",cols:"6"}},[a("b-card",{attrs:{"no-body":""}},[a("b-card-body",[a("b-link",{attrs:{to:{path:"/member/",query:{ref:e.id}}}},[a("ui--member-image",{attrs:{member:e}})],1)],1),t._v(" "),a("b-card-footer",[t._v("\n                            #"+t._s(e.id)+"\n\n                            "),a("div",{staticClass:"float-right"},[e.approved?a("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"p-1",attrs:{title:"Verified",variant:"success",pill:""}},[a("font-awesome-icon",{attrs:{icon:"check-circle"}})],1):t._e()],1)])],1)],1)})),1),t._v(" "),t.memberList.length<t.dao.membersNumber?a("b-row",{staticClass:"my-5"},[a("b-col",{staticClass:"text-center",attrs:{md:"12"}},[a("b-btn",{attrs:{variant:"outline-primary",size:"lg"},on:{click:t.loadMore}},[t._v("\n                        Load more\n                    ")])],1)],1):t._e()],1)],1)],2)}),[],!1,null,null,null);e.default=d.exports}}]);